<!DOCTYPE html><html lang="en-US">
<!-- Mirrored from thegeekdiary.com/solaris-volume-manager-svm-growing-mirrored-metadevices-online/ by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 23 Feb 2016 06:59:55 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head><!--[if IE]><![endif]--><link rel="dns-prefetch" href="http://fonts.googleapis.com/"/><link rel="dns-prefetch" href="http://pagead2.googlesyndication.com/"/><link rel="dns-prefetch" href="https://googleads.g.doubleclick.net/"/><link rel="stylesheet" href="../wp-content/cache/min/1/ab9dfccf3aeaecf3d14cd8e298c691c9.css" data-minify="1"/><script async src="http://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script src="https://apis.google.com/js/platform.js" async defer></script><script src="../wp-content/cache/min/1/203bccdeaed8b26e6c7a81dfdd6586ac.js" data-minify="1"></script><script src="../wp-content/cache/min/1/bd2496c4770e643443664a8d2d58dd49.js" data-minify="1"></script><script src="../wp-content/cache/min/1/6d40f649f9b6e55667652760e63f5b7f.js" data-minify="1"></script> <meta charset="UTF-8"/><title>Solaris Volume Manager (SVM) : Growing mirrored metadevices online</title><meta name="description" content="Solaris Volume Manager (SVM) : Growing mirrored metadevices online. The high level steps to grow the mirrored metadevice d3 includes : 1. Attaching 2 more sub-mirrors (bigger ones - d32 and d33) to the parent metadevice d3. 2. Detaching the older sub-mirrors d30 and d31 after sync. 3. Growing the parent metadevice d3 to reflect new size. 4. Growing the file system."/><meta name="keywords" content="solaris volume manager, svm, growing mirrored metadevice, metadevice, metattach, metadetach, metainit"/><meta name="robots" content="noodp,noydir"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="alternate" type="application/rss+xml" title="The Geek Diary &raquo; Feed" href="../feed/index.html"/><link rel="alternate" type="application/rss+xml" title="The Geek Diary &raquo; Comments Feed" href="../comments/feed/index.html"/><link rel="alternate" type="application/rss+xml" title="The Geek Diary &raquo; Solaris Volume Manager (SVM) : Growing mirrored metadevices online Comments Feed" href="feed/index.html"/><link rel="canonical" href="index.html"/> <script type="text/javascript">window._wpemojiSettings={"baseUrl":"http:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/thegeekdiary.com\/wp-includes\/js\/wp-emoji-release.min.js"}};!function(a,b,c){function d(a){var c,d=b.createElement("canvas"),e=d.getContext&&d.getContext("2d");return e&&e.fillText?(e.textBaseline="top",e.font="600 32px Arial","flag"===a?(e.fillText(String.fromCharCode(55356,56806,55356,56826),0,0),d.toDataURL().length>3e3):"diversity"===a?(e.fillText(String.fromCharCode(55356,57221),0,0),c=e.getImageData(16,16,1,1).data.toString(),e.fillText(String.fromCharCode(55356,57221,55356,57343),0,0),c!==e.getImageData(16,16,1,1).data.toString()):("simple"===a?e.fillText(String.fromCharCode(55357,56835),0,0):e.fillText(String.fromCharCode(55356,57135),0,0),0!==e.getImageData(16,16,1,1).data[0])):!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g;c.supports={simple:d("simple"),flag:d("flag"),unicode8:d("unicode8"),diversity:d("diversity")},c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.simple&&c.supports.flag&&c.supports.unicode8&&c.supports.diversity||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);</script> <style type="text/css">img.wp-smiley,img.emoji{display:inline!important;border:none!important;box-shadow:none!important;height:1em!important;width:1em!important;margin:0 .07em!important;vertical-align:-0.1em!important;background:none!important;padding:0!important}</style><link rel='https://api.w.org/' href='../wp-json/index.html'/><link rel="EditURI" type="application/rsd+xml" title="RSD" href="../xmlrpc0db0.php?rsd"/><link rel="alternate" type="application/json+oembed" href="../wp-json/oembed/1.0/embede222.json?url=http%3A%2F%2Fthegeekdiary.com%2Fsolaris-volume-manager-svm-growing-mirrored-metadevices-online%2F"/><link rel="alternate" type="text/xml+oembed" href="../wp-json/oembed/1.0/embed047d?url=http%3A%2F%2Fthegeekdiary.com%2Fsolaris-volume-manager-svm-growing-mirrored-metadevices-online%2F&amp;format=xml"/><link rel="Shortcut Icon" href="../wp-content/themes/minimum-pro/images/favicon.ico" type="image/x-icon"/><link rel="author" href="https://plus.google.com/u/0/103178102930927944245/"/> <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]--> <script type="text/javascript">var fb_timeout=null;var fb_opts={'overlayShow':true,'hideOnOverlayClick':true,'showCloseButton':true,'centerOnScroll':true,'enableEscapeButton':true,'autoScale':true};var easy_fancybox_handler=function(){var fb_IMG_select='a[href*=".jpg"]:not(.nofancybox,.pin-it-button), area[href*=".jpg"]:not(.nofancybox), a[href*=".jpeg"]:not(.nofancybox,.pin-it-button), area[href*=".jpeg"]:not(.nofancybox), a[href*=".png"]:not(.nofancybox,.pin-it-button), area[href*=".png"]:not(.nofancybox)';jQuery(fb_IMG_select).addClass('fancybox image');var fb_IMG_sections=jQuery('div.gallery');fb_IMG_sections.each(function(){jQuery(this).find(fb_IMG_select).attr('rel','gallery-'+fb_IMG_sections.index(this));});jQuery('a.fancybox, area.fancybox, li.fancybox a:not(li.nofancybox a)').fancybox(jQuery.extend({},fb_opts,{'transitionIn':'elastic','easingIn':'easeOutBack','transitionOut':'elastic','easingOut':'easeInBack','opacity':false,'hideOnContentClick':false,'titleShow':false,'titlePosition':'over','titleFromAlt':true,'showNavArrows':true,'enableKeyboardNav':true,'cyclic':false}));jQuery('a[href*=".pdf"]:not(.nofancybox), area[href*=".pdf"]:not(.nofancybox)').addClass('fancybox-pdf');jQuery('a.fancybox-pdf, area.fancybox-pdf, li.fancybox-pdf a:not(li.nofancybox a)').fancybox(jQuery.extend({},fb_opts,{'type':'html','width':'90%','height':'90%','padding':10,'titleShow':false,'titlePosition':'float','titleFromAlt':true,'autoDimensions':false,'scrolling':'no','onStart':function(selectedArray,selectedIndex,selectedOpts){selectedOpts.content='<embed src="'+selectedArray[selectedIndex].href+'#toolbar=1&navpanes=0&nameddest=self&page=1&view=FitH,0&zoom=80,0,0" type="application/pdf" height="100%" width="100%" />'}}));jQuery('a[href*="youtube.com/watch"]:not(.nofancybox), area[href*="youtube.com/watch"]:not(.nofancybox)').addClass('fancybox-youtube');jQuery('a[href*="youtu.be/"]:not(.nofancybox), area[href*="youtu.be/"]:not(.nofancybox)').addClass('fancybox-youtube');jQuery('a.fancybox-youtube, area.fancybox-youtube, li.fancybox-youtube a:not(li.nofancybox a)').fancybox(jQuery.extend({},fb_opts,{'type':'iframe','width':640,'height':360,'titleShow':false,'titlePosition':'float','titleFromAlt':true,'onStart':function(selectedArray,selectedIndex,selectedOpts){selectedOpts.href=selectedArray[selectedIndex].href.replace(new RegExp('youtu.be','i'),'www.youtube.com/embed').replace(new RegExp('watch\\?(.*)v=([a-z0-9\_\-]+)(&amp;|&|\\?)?(.*)','i'),'embed/$2?$1$4');var splitOn=selectedOpts.href.indexOf('?');var urlParms=(splitOn>-1)?selectedOpts.href.substring(splitOn):"";selectedOpts.allowfullscreen=(urlParms.indexOf('fs=0')>-1)?false:true}}));jQuery('#fancybox-auto').trigger('click');}</script> <script data-no-minify="1">(function(w,d){function a(){var b=d.createElement("script");b.async=!0;b.src="../wp-content/plugins/wp-rocket/inc/front/js/lazyload.1.0.2.min.js";var a=d.getElementsByTagName("script")[0];a.parentNode.insertBefore(b,a)}w.attachEvent?w.attachEvent("onload",a):w.addEventListener("load",a,!1)})(window,document);</script></head><body class="single single-post postid-2376 single-format-standard custom-header content-sidebar" itemscope="itemscope" itemtype="http://schema.org/WebPage"><div class="site-container"><header class="site-header" role="banner" itemscope="itemscope" itemtype="http://schema.org/WPHeader"><div class="wrap"><div class="title-area"><p class="site-title" itemprop="headline"><a href="../index.html" title="The Geek Diary">The <span class="custom-title">{Geek} </span>Diary</a></p><h2 class="site-description" itemprop="description">HowTos | Concepts | Guides</h2></div><aside class="widget-area header-widget-area"><section id="text-31" class="widget widget_text"><div class="widget-wrap"><div class="textwidget"><div style="text-align: center"><style>.responsive-after-post{width:728px;height:90px}@media(max-width: 800px){.responsive-after-post{display:none !Important}}</style> <ins class="adsbygoogle responsive-after-post"
style="display:inline-block"
data-ad-client="ca-pub-9806101468749934"
data-ad-slot="9599170000"></ins> <script>(adsbygoogle=window.adsbygoogle||[]).push({});</script> </div></div></div></section></aside></div></header><nav class="nav-primary" role="navigation" itemscope="itemscope" itemtype="http://schema.org/SiteNavigationElement"><div class="wrap"><ul id="menu-primary-navigation" class="menu genesis-nav-menu menu-primary"><li id="menu-item-2717" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor menu-item-has-children menu-item-2717"><a href="../category/solaris/index.html">Solaris</a><ul class="sub-menu"><li id="menu-item-2837" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-2837"><a href="../category/solaris/svm/index.html">SVM</a></li><li id="menu-item-2839" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-2839"><a href="../category/solaris/zfs/index.html">ZFS</a></li><li id="menu-item-2836" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-2836"><a href="../category/solaris/hardware/index.html">Hardware</a></li><li id="menu-item-2838" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-2838"><a href="../category/solaris/vxvm/index.html">VxVM</a></li></ul></li><li id="menu-item-2833" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-2833"><a href="../category/solaris/solaris-11/index.html">Solaris 11</a></li><li id="menu-item-2835" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-2835"><a href="../category/solaris/zones/index.html">Zones</a></li><li id="menu-item-2834" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-2834"><a href="../category/solaris/ldoms/index.html">LDOMs</a></li><li id="menu-item-2718" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-2718"><a href="../category/vcs/index.html">VCS</a></li><li id="menu-item-2719" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-2719"><a href="../category/linux/index.html">Linux</a></li><li id="menu-item-2840" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-2840"><a href="../category/interview-questions/index.html">Interview Questions</a></li><li id="menu-item-2931" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-2931"><a href="../category/oracle/index.html">oracle</a></li></ul></div></nav><div class="site-inner"><div class="wrap"><div class="content-sidebar-wrap"><main class="content" role="main" itemprop="mainContentOfPage" itemscope="itemscope" itemtype="http://schema.org/Blog"><article class="post-2376 post type-post status-publish format-standard category-svm entry" itemscope="itemscope" itemtype="http://schema.org/BlogPosting" itemprop="blogPost"><header class="entry-header"><h1 class="entry-title" itemprop="headline">Solaris Volume Manager (SVM) : Growing mirrored metadevices online</h1><p class="entry-meta">By <span class="entry-author" itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><a href="../author/sandeep_patil/index.html" class="entry-author-link" itemprop="url" rel="author"><span class="entry-author-name" itemprop="name">Sandeep</span></a></span> <span class="entry-comments-link"><a href="index.html#comments"><span class="dsq-postid" data-dsqidentifier="2376 http://thegeekdiary.com/?p=2376">7 Comments</span></a></span></p></header><div class="entry-content" itemprop="text"><div class="content-box-yellow"><a title="Solaris Volume Manager (SVM) : Growing RAID 5 metadevices online" href="../solaris-volume-manager-svm-growing-raid-5-metadevices-online/index.html" target="_blank">Solaris Volume Manager (SVM) : Growing RAID 5 metadevices online</a><br /> <a title="Solaris Volume Manager (SVM) : Growing concat metadevice" href="../solaris-volume-manager-svm-growing-concat-metadevice/index.html" target="_blank">Solaris Volume Manager (SVM) : Growing concat metadevice</a></div><p>The example shown below uses metadevice d3, which is a 33Gb mirror with a mounted file system. The high level steps to grow the mirrored metadevice d3 includes :</p><p><strong>1. Attaching 2 more sub-mirrors (bigger ones &#8211; d32 and d33) to the parent metadevice d3.<br /> 2. Detaching the older sub-mirrors d30 and d31 after sync.<br /> 3. Growing the parent metadevice d3 to reflect new size.<br /> 4. Growing the file system.</strong></p><div><table border=0 style="width: 100%; margin-bottom: 20px;"><tr><td style="border-top:none; text-align: center; padding: 1rem 0px 0px;"><style>.square-responsive{width:300px;height:250px}@media(max-width: 400px){.square-responsive{width:250px;height:250px}}</style> <ins class="adsbygoogle square-responsive"
style="display:inline-block"
data-ad-client="ca-pub-9806101468749934"
data-ad-slot="7337034404"></ins> <script>(adsbygoogle=window.adsbygoogle||[]).push({});</script></td></tr></table></div><h4>Attaching 2 new sub-mirrors (bigger size)</h4><p>The parent metadevice d3 is of size 33 GB with 2 sub-mirrors d30 and d31.</p><div class="codeme"><pre># metastat d3
   d3: Mirror
       Submirror 0: d30
         State: Okay
       Submirror 1: d31
         State: Okay
       Pass: 1
       Read option: roundrobin (default)
       Write option: parallel (default)
       Size: 70574080 blocks (33 GB)

   d30: Submirror of d3
       State: Okay
       Size: 70574080 blocks (33 GB)
       Stripe 0:
           Device     Start Block  Dbase        State Reloc Hot Spare
           c3t0d0s0          0     No            Okay   Yes

   d31: Submirror of d3
       State: Okay
       Size: 70574080 blocks (33 GB)
       Stripe 0:
           Device     Start Block  Dbase        State Reloc Hot Spare
           c3t0d1s0          0     No            Okay   Yes</pre></div><p>To grow the metadevice, we will be adding 2 more large submirrors d32, d33 (from disks c4t0d0 and c4t0d1), making it a 4 way mirror, sync it and then remove the original 2 submirrors.</p><p><a href="../wp-content/uploads/2014/03/4-way-mirror-SVM.png"><img class="aligncenter size-full wp-image-2380" src="data:image/gif;base64,R0lGODdhAQABAPAAAP///wAAACwAAAAAAQABAEACAkQBADs=" data-lazy-src="http://thegeekdiary.com/wp-content/uploads/2014/03/4-way-mirror-SVM.png" alt="4 way mirror SVM" width="542" height="152" /><noscript><img class="aligncenter size-full wp-image-2380" src="../wp-content/uploads/2014/03/4-way-mirror-SVM.png" alt="4 way mirror SVM" width="542" height="152" /></noscript></a></p><div class="codeme"><pre># metainit d32 1 1 c4t0d0s0
# metainit d33 1 1 c4t0d1s0
# metattach d3 d32
# metattach d3 d33</pre></div><p>Now we have a 4-way mirror :</p><div class="codeme"><pre># metastat d3
   d3: Mirror
       Submirror 0: d30
         State: Okay
       Submirror 1: d31
         State: Okay
       Submirror 2: d32
         State: Okay
       Submirror 3: d33
         State: Okay
       Pass: 1
       Read option: roundrobin (default)
       Write option: parallel (default)
       Size: 70574080 blocks (33 GB)

   d30: Submirror of d3
       State: Okay
       Size: 70574080 blocks (33 GB)
       Stripe 0:
           Device     Start Block  Dbase        State Reloc Hot Spare
           c3t0d0s0          0     No            Okay   Yes

   d31: Submirror of d3
       State: Okay
       Size: 70574080 blocks (33 GB)
       Stripe 0:
           Device     Start Block  Dbase        State Reloc Hot Spare
           c3t0d1s0          0     No            Okay   Yes

   d32: Submirror of d3
       State: Okay
       Size: 141148160 blocks (67 GB)
       Stripe 0:
           Device     Start Block  Dbase        State Reloc Hot Spare
           c4t0d0s0          0     No            Okay   Yes

   d33: Submirror of d3
       State: Okay
       Size: 141148160 blocks (67 GB)
       Stripe 0:
           Device     Start Block  Dbase        State Reloc Hot Spare
           c4t0d1s0          0     No            Okay   Yes</pre></div><h4>Detaching the older sub-mirrors</h4><p>We would let the new sub-mirrors to sync up and then detach the original submirrors d30 and d31.</p><p><a href="../wp-content/uploads/2014/03/SVM-4-way-mirror-new.png"><img class="aligncenter size-full wp-image-2452" src="data:image/gif;base64,R0lGODdhAQABAPAAAP///wAAACwAAAAAAQABAEACAkQBADs=" data-lazy-src="http://thegeekdiary.com/wp-content/uploads/2014/03/SVM-4-way-mirror-new.png" alt="SVM 4 way mirror new" width="551" height="146" /><noscript><img class="aligncenter size-full wp-image-2452" src="../wp-content/uploads/2014/03/SVM-4-way-mirror-new.png" alt="SVM 4 way mirror new" width="551" height="146" /></noscript></a></p><p>&nbsp;</p><div class="codeme"><pre># metadetach d3 d30
   d3: submirror d30 is detached
# metadetach d3 d31
   d3: submirror d31 is detached</pre></div><div class="content-box-green">This leaves you with a two way mirror where each sub-mirror is twice the size, but the parent mirror is still the original size. Because of this, you can not use growfs to utilize the new space. Note carefully how the sub-mirrors are different sizes to the parent mirror.</div><div class="codeme"><pre># metastat d3
   d3: Mirror
       Submirror 2: d32
    State: Okay 
    Submirror 3: d33
    State: Okay 
    Pass: 1
    Read option: roundrobin (default)
    Write option: parallel (default)
       Size: 70574080 blocks (33 GB)

    d32: Submirror of d3
       State: Okay 
       Size: 141148160 blocks (67 GB)
       Stripe 0:
    Device Start Block Dbase State Reloc Hot Spare
    c4t0d2s0 0 No Okay Yes 


   d33: Submirror of d3
    State: Okay 
    Size: 141148160 blocks (67 GB)
    Stripe 0:
    Device Start Block Dbase State Reloc Hot Spare
    c4t0d1s0 0 No Okay Yes</pre></div><p>The key step is to use <strong>&#8220;metattach mirror&#8221;</strong>. This tells the parent mirror to grow to the size of its smallest current sub-mirror.</p><div class="codeme"><pre># metattach d3</pre></div><p>Notice how the parent size has changed.</p><div class="codeme"><pre># metastat d3
   d3: Mirror
    Submirror 2: d32
    State: Okay 
    Submirror 3: d33
    State: Okay 
    Pass: 1
    Read option: roundrobin (default)
    Write option: parallel (default)
    Size: 141148160 blocks (67 GB)

   d32: Submirror of d3
    State: Okay 
    Size: 141148160 blocks (67 GB)
    Stripe 0:
    Device Start Block Dbase State Reloc Hot Spare
    c3t0d2s0 0 No Okay Yes 


   d33: Submirror of d3
    State: Okay 
    Size: 141148160 blocks (67 GB)
    Stripe 0:
    Device Start Block Dbase State Reloc Hot Spare
    c3t0d3s0 0 No Okay Yes</pre></div><h4>Growing the file system</h4><p>You can now use growfs to make the new space available to the file system.</p><div class="codeme"><pre># growfs -M /d3 /dev/md/rdsk/d3
/dev/md/rdsk/d3: 141148160 sectors in 68920 cylinders of 64 tracks, 32 sectors
68920.0MB in 1407 cyl groups (49 c/g, 49.00MB/g, 6144 i/g)
super-block backups (for fsck -F ufs -o b=#) at:
32, 100416, 200800, 301184, 401568, 501952, 602336, 702720, 803104, 903488, 140595008, 
140695392, 140795776, 140896160, 140996544, 141096928,</pre></div><p>Verify the new size of the file system :</p><div class="codeme"><pre># df -k /d3
Filesystem kbytes used avail capacity Mounted on
/dev/md/dsk/d3 69470954 34730557 34393047 51% /d3</pre></div><div class="content-box-yellow"><a title="Solaris Volume Manager (SVM) : Growing RAID 5 metadevices online" href="../solaris-volume-manager-svm-growing-raid-5-metadevices-online/index.html" target="_blank">Solaris Volume Manager (SVM) : Growing RAID 5 metadevices online</a><br /> <a title="Solaris Volume Manager (SVM) : Growing concat metadevice" href="../solaris-volume-manager-svm-growing-concat-metadevice/index.html" target="_blank">Solaris Volume Manager (SVM) : Growing concat metadevice</a></div></p><div class="geek-social"><h5>SHARE ON</h5> <a class="geek-link geek-twitter" href="https://twitter.com/intent/tweet?text=Solaris%20Volume%20Manager%20(SVM)%20:%20Growing%20mirrored%20metadevices%20online&amp;url=http://thegeekdiary.com/solaris-volume-manager-svm-growing-mirrored-metadevices-online/&amp;via=patilsandeep911" target="_blank">Twitter</a><a class="geek-link geek-facebook" href="https://www.facebook.com/sharer/sharer.php?u=http://thegeekdiary.com/solaris-volume-manager-svm-growing-mirrored-metadevices-online/" target="_blank">Facebook</a><a class="geek-link geek-googleplus" href="https://plus.google.com/share?url=http://thegeekdiary.com/solaris-volume-manager-svm-growing-mirrored-metadevices-online/" target="_blank">Google+</a></div></div><footer class="entry-footer"><p class="entry-meta"><span class="entry-categories">Filed Under: <a href="../category/solaris/svm/index.html" rel="category tag">SVM</a></span></p><div class="related-posts"><h3 class="related-title">Related Posts</h3><ol class="related-list"><li><a href="../svm-how-to-un-encapsulate-root-disk-sparc/index.html" rel="bookmark" title="Permanent Link toSVM : How to un-encapsulate root disk (SPARC)">SVM : How to un-encapsulate root disk (SPARC)</a></li><li><a href="../svm-root-encapsulation-and-mirroring/index.html" rel="bookmark" title="Permanent Link toSVM root encapsulation and mirroring [SPARC]">SVM root encapsulation and mirroring [SPARC]</a></li><li><a href="../solaris-volume-manager-svm-how-to-use-metadevadm-to-maintain-device-relocation-information-after-disk-replacement/index.html" rel="bookmark" title="Permanent Link toSVM : How to Use Metadevadm to Maintain Device Relocation Information After Disk Replacement">SVM : How to Use Metadevadm to Maintain Device Relocation Information After Disk Replacement</a></li><li><a href="../solaris-volume-manager-svm-growing-concat-metadevice/index.html" rel="bookmark" title="Permanent Link toSolaris Volume Manager (SVM) : Growing concat metadevice">Solaris Volume Manager (SVM) : Growing concat metadevice</a></li><li><a href="../the-ultimate-solaris-volume-manager-svm-interview-questions/index.html" rel="bookmark" title="Permanent Link toThe ultimate Solaris Volume Manager (SVM) interview questions">The ultimate Solaris Volume Manager (SVM) interview questions</a></li></ol></div></footer></article><div id="disqus_thread"><div id="dsq-content"><ul id="dsq-comments"><li class="comment even thread-even depth-1" id="dsq-comment-5769"><div id="dsq-comment-header-5769" class="dsq-comment-header"><cite id="dsq-cite-5769"> <span id="dsq-author-user-5769">Ramesh</span></cite></div><div id="dsq-comment-body-5769" class="dsq-comment-body"><div id="dsq-comment-message-5769" class="dsq-comment-message"><p>Patil,</p><p>Good doc, want to know how the controller ids c4t0d0 &amp; c4t0d1 changed for d32 and d34  volumes to c3t0d0 &amp; c3t0d1</p><p>Thanks</p></div></div><ul class="children"><li class="comment byuser comment-author-sandeep_patil bypostauthor odd alt depth-2" id="dsq-comment-5774"><div id="dsq-comment-header-5774" class="dsq-comment-header"><cite id="dsq-cite-5774"> http://www.thegeekdiary.com <span id="dsq-author-user-5774">Sandeep Patil</span></cite></div><div id="dsq-comment-body-5774" class="dsq-comment-body"><div id="dsq-comment-message-5774" class="dsq-comment-message"><p>my, bad. Changed the figure 2. It should be controller c4. Thanks for pointing it out.</p></div></div></li><li class="comment even depth-2" id="dsq-comment-9769"><div id="dsq-comment-header-9769" class="dsq-comment-header"><cite id="dsq-cite-9769"> http://thegeekdiary.com <span id="dsq-author-user-9769">Sandeep Patil</span></cite></div><div id="dsq-comment-body-9769" class="dsq-comment-body"><div id="dsq-comment-message-9769" class="dsq-comment-message"><p>Ohh ! my bad. Made the necessary corrections. Thanks for pointing that out.</p></div></div></li></ul></li><li class="comment odd alt thread-odd thread-alt depth-1" id="dsq-comment-7644"><div id="dsq-comment-header-7644" class="dsq-comment-header"><cite id="dsq-cite-7644"> <span id="dsq-author-user-7644">Mani</span></cite></div><div id="dsq-comment-body-7644" class="dsq-comment-body"><div id="dsq-comment-message-7644" class="dsq-comment-message"><p>Please find the below df and metastat output and kindly provide me step by step action plan for the storage Migration &#8230;. Existing storage will be upgraded to new storage version .</p><p>Please let me know if any query /output.</p><p>df -kh<br /> Filesystem             size   used  avail capacity  Mounted on<br /> /dev/md/dsk/d0          20G   8.9G    11G    46%    /<br /> /devices                 0K     0K     0K     0%    /devices<br /> ctfs                     0K     0K     0K     0%    /system/contract<br /> proc                     0K     0K     0K     0%    /proc<br /> mnttab                   0K     0K     0K     0%    /etc/mnttab<br /> swap                    17G   1.6M    17G     1%    /etc/svc/volatile<br /> objfs                    0K     0K     0K     0%    /system/object<br /> sharefs                  0K     0K     0K     0%    /etc/dfs/sharetab<br /> /platform/sun4u-us3/lib/libc_psr/libc_psr_hwcap2.so.1<br /> 20G   8.9G    11G    46%    /platform/sun4u-us3/lib/libc_psr.so.1<br /> /platform/sun4u-us3/lib/sparcv9/libc_psr/libc_psr_hwcap2.so.1<br /> 20G   8.9G    11G    46%    /platform/sun4u-us3/lib/sparcv9/libc_psr.so.1<br /> fd                       0K     0K     0K     0%    /dev/fd<br /> /dev/md/dsk/d7          34G    27G   7.0G    80%    /var<br /> swap                   2.0G   160K   2.0G     1%    /tmp<br /> swap                    17G    72K    17G     1%    /var/run<br /> /dev/md/dsk/d400        25G    18G   6.2G    75%    /zones/wmsapp-d21<br /> /dev/md/dsk/d500        25G    17G   7.5G    70%    /zones/wmsapp-q21<br /> /dev/md/dsk/d504        47G   9.5G    37G    21%    /zones/wmsapp-q21/fs/wmsq<br /> /dev/md/dsk/d404        47G   8.1G    39G    18%    /zones/wmsapp-d21/fs/wmsd<br /> /dev/md/dsk/d602        10G   1.6G   8.3G    17%    /zones/wmsapp-q21/fs/iface/LYNQ2<br /> /dev/md/dsk/d601        10G   5.2G   4.8G    53%    /zones/wmsapp-q21/fs/wms/LYNQ2<br /> [root@server</p><p>[root@server# metastat -c<br /> d602             p   10GB d600<br /> d601             p   10GB d600<br /> d600         s   29GB /dev/dsk/emcpower0a<br /> d500             m   25GB d502 d501<br /> d502         s   25GB c1t1d0s5<br /> d501         s   25GB c1t0d0s5<br /> d7               m   34GB d27 d17<br /> d27          s   34GB c1t1d0s7<br /> d17          s   34GB c1t0d0s7<br /> d0               m   20GB d20 d10<br /> d20          s   20GB c1t1d0s0<br /> d10          s   20GB c1t0d0s0<br /> d1               m   32GB d21 d11<br /> d21          s   32GB c1t1d0s1<br /> d11          s   32GB c1t0d0s1<br /> d400             m   25GB d402 d401<br /> d402         s   25GB c1t1d0s4<br /> d401         s   25GB c1t0d0s4<br /> d504             s   47GB /dev/dsk/emcpower6g /dev/dsk/emcpower7g<br /> d503             s   46GB /dev/dsk/emcpower2g /dev/dsk/emcpower3g<br /> d403             s   46GB /dev/dsk/emcpower0g /dev/dsk/emcpower1g<br /> d404             s   47GB /dev/dsk/emcpower4g /dev/dsk/emcpower5g<br /> You have new mail in /var/mail/root<br /> [root@server</p></div></div></li><li class="comment even thread-even depth-1" id="dsq-comment-7746"><div id="dsq-comment-header-7746" class="dsq-comment-header"><cite id="dsq-cite-7746"> <span id="dsq-author-user-7746">harish</span></cite></div><div id="dsq-comment-body-7746" class="dsq-comment-body"><div id="dsq-comment-message-7746" class="dsq-comment-message"><p>Can we use this methode to increase &#8220;root&#8221; file system?</p><p>I mean<br /> 1 detach the mirror<br /> 2 increase the slice of mirror disk,<br /> 3 attach the mirror slice wait for sync<br /> 4 metattach mirror<br /> 5 grow the &#8220;root&#8221; file system  &#8220;growfs -M / /dev/md/rdsk/d3</p></div></div><ul class="children"><li class="comment byuser comment-author-sandeep_patil bypostauthor odd alt depth-2" id="dsq-comment-7750"><div id="dsq-comment-header-7750" class="dsq-comment-header"><cite id="dsq-cite-7750"> http://www.thegeekdiary.com <span id="dsq-author-user-7750">Sandeep Patil</span></cite></div><div id="dsq-comment-body-7750" class="dsq-comment-body"><div id="dsq-comment-message-7750" class="dsq-comment-message"><p>Nope. not possible. And by the way root volumes can not have a 4 way mirror in the first place in any volume manager.</p></div></div></li></ul></li><li class="comment even thread-odd thread-alt depth-1" id="dsq-comment-9872"><div id="dsq-comment-header-9872" class="dsq-comment-header"><cite id="dsq-cite-9872"> <span id="dsq-author-user-9872">kimero</span></cite></div><div id="dsq-comment-body-9872" class="dsq-comment-body"><div id="dsq-comment-message-9872" class="dsq-comment-message"><p>Thank you for this! I successfully expanded some old md filesystems using newer disks and growfs was faster than expected</p></div></div></li></ul></div></div> <script type="text/javascript">var disqus_url='index.html';var disqus_identifier='2376%20http_/thegeekdiary.com/index5b90.html?p=2376';var disqus_container_id='disqus_thread';var disqus_shortname='thegeekdiary';var disqus_title="Solaris Volume Manager (SVM) : Growing mirrored metadevices online";var disqus_config_custom=window.disqus_config;var disqus_config=function(){this.language='';this.callbacks.onReady.push(function(){var script=document.createElement('script');script.async=true;script.src='index4ca0.html?cf_action=sync_comments&amp;post_id=2376';var firstScript=document.getElementsByTagName('script')[0];firstScript.parentNode.insertBefore(script,firstScript);});if(disqus_config_custom){disqus_config_custom.call(this);}};(function(){var dsq=document.createElement('script');dsq.type='text/javascript';dsq.async=true;dsq.src='//'+disqus_shortname+'.disqus.com/embed.js';(document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(dsq);})();</script> </main><aside class="sidebar sidebar-primary widget-area" role="complementary" itemscope="itemscope" itemtype="http://schema.org/WPSideBar"><section id="search-2" class="widget widget_search"><div class="widget-wrap"><form method="get" class="search-form" action="http://thegeekdiary.com/" role="search"><input type="search" name="s" placeholder="Search the blog ..." /><input type="submit" value="Search" /></form></div></section><section id="text-54" class="widget widget_text"><div class="widget-wrap"><div class="textwidget"><div id="fb-root"></div> <script>(function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(d.getElementById(id))return;js=d.createElement(s);js.id=id;js.src="http://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.5&appId=122185768114530";fjs.parentNode.insertBefore(js,fjs);}(document,'script','facebook-jssdk'));</script> <div class="fb-page" data-href="https://www.facebook.com/thegeekdiary" data-height="320" data-small-header="false" data-adapt-container-width="true" data-hide-cover="false" data-show-facepile="false"><div class="fb-xfbml-parse-ignore"><blockquote cite="https://www.facebook.com/thegeekdiary"><a href="https://www.facebook.com/thegeekdiary">Thegeekdiary</a></blockquote></div></div></div></div></section><section id="text-53" class="widget widget_text"><div class="widget-wrap"><div class="textwidget"><div style="padding: 20px 0; overflow: hidden;" id="optin"><div class="g-person" data-width="273" data-href="//plus.google.com/u/0/103178102930927944245" data-theme="dark" data-layout="landscape" data-rel="author"></div><p style="padding: 0 15px; margin-bottom: 7px">India based Unix Admin, Cloud Evangelist and a Virtualization lover. Read more about me <a style="color: #d35400;" class="pagelink" href="../about/index.html">here ...</a></p><style>.twitter-btn{font:normal normal normal 13px/26px 'Helvetica Neue',Arial,sans-serif;height:28px;border-radius:4px;max-width:100%;box-sizing:border-box;position:relative;background-color:#F8F8F8;background-image:-webkit-gradient(linear,left top,left bottom,from(#FFF),to(#DEDEDE));background-image:-moz-linear-gradient(top,#FFF,#DEDEDE);background-image:-o-linear-gradient(top,#FFF,#DEDEDE);background-image:-ms-linear-gradient(top,#FFF,#DEDEDE);background-image:linear-gradient(top,#FFF,#DEDEDE);border:#CCC solid 1px;color:#333;font-weight:bold;text-shadow:0 1px 0 rgba(255,255,255,.5);-webkit-user-select:none;-moz-user-select:none;-o-user-select:none;user-select:none;cursor:pointer;overflow:hidden;display:inline-block;vertical-align:top;zoom:1;text-decoration:none}.twitter-btn:hover{text-decoration:none}.twitter-btn
i{width:21px;height:16px;left:4px;margin-top:-6px;position:absolute;top:50%;background:rgba(0, 0, 0, 0) url(data:image/png;base64,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) 0 0 no-repeat;background-position:-24px 0}.twitter-btn
.label{padding:0
7px 0 29px;white-space:nowrap}</style><a target="_blank" class="twitter-btn" title="Follow @patilsandeep911 on Twitter" href="https://twitter.com/intent/user?screen_name=patilsandeep911"> <i></i> <span class="label">@patilsandeep911</span> </a></div></div></div></section><section id="text-41" class="widget widget_text"><div class="widget-wrap"><div class="textwidget"><div id="optin"><form action="http://thegeekdiary.us3.list-manage.com/subscribe/post?u=dfd9717ae3a215b40e3cb1ffb&amp;id=24b8b4f404" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank"><h5>GET YOUR FREE E-BOOK</h5><p>Download the FREE ebook - The Complete Oracle Hardware reference</p><input type="email" size="30" value="Enter your email" name="EMAIL" class="required email" id="mce-EMAIL" onfocus="if(this.value==this.defaultValue)this.value='';" onblur="if(this.value=='')this.value=this.defaultValue;"><div id="mce-responses" class="clear"><div class="response" id="mce-error-response" style="display:none"></div><div class="response" id="mce-success-response" style="display:none"></div></div><div class="clear"> <input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button"></div></form></div></div></div></section><section id="text-23" class="widget widget_text"><div class="widget-wrap"><div class="textwidget"><style>.sidebar-responsive{width:300px;height:600px}@media(max-width: 1024px){.sidebar-responsive{width:300px;height:250px}}</style> <ins class="adsbygoogle sidebar-responsive"
style="display:inline-block"
data-ad-client="ca-pub-9806101468749934"
data-ad-slot="1672277200"></ins> <script>(adsbygoogle=window.adsbygoogle||[]).push({});</script></div></div></section></aside></div></div></div><footer class="site-footer" role="contentinfo" itemscope="itemscope" itemtype="http://schema.org/WPFooter"><div class="wrap"><nav class="nav-footer"><ul id="menu-top-menu" class="menu genesis-nav-menu menu-footer"><li id="menu-item-316" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-316"><a href="../archives/index.html">Archives</a></li><li id="menu-item-317" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-317"><a href="../contact-us/index.html">Contact Us</a></li><li id="menu-item-2584" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2584"><a href="../copyright-terms-and-privacy-policy/index.html">Copyright</a></li></ul></nav></div></footer></div> <script type="text/javascript">var disqus_shortname='thegeekdiary';(function(){var nodes=document.getElementsByTagName('span');for(var i=0,url;i<nodes.length;i++){if(nodes[i].className.indexOf('dsq-postid')!=-1){nodes[i].parentNode.setAttribute('data-disqus-identifier',nodes[i].getAttribute('data-dsqidentifier'));url=nodes[i].parentNode.href.split('#',1);if(url.length==1){url=url[0];}
else{url=url[1];}
nodes[i].parentNode.href=url+'#disqus_thread';}}
var s=document.createElement('script');s.async=true;s.type='text/javascript';s.src='//'+disqus_shortname+'.disqus.com/count.js';(document.getElementsByTagName('HEAD')[0]||document.getElementsByTagName('BODY')[0]).appendChild(s);}());</script> <script type="text/javascript">jQuery(document).ready(function(){var q2w3_sidebar_1_options={"sidebar":"sidebar","margin_top":20,"margin_bottom":80,"screen_max_width":768,"width_inherit":false,"widgets":['text-23']};q2w3_sidebar(q2w3_sidebar_1_options);setInterval(function(){q2w3_sidebar(q2w3_sidebar_1_options);},1500);});</script> <script type="text/javascript">jQuery(document).on('ready post-load',easy_fancybox_handler);</script> <script src="../wp-content/cache/min/1/ea696d6d2b5f14b168c9151cbbe8c939.js" data-minify="1"></script></body>
<!-- Mirrored from thegeekdiary.com/solaris-volume-manager-svm-growing-mirrored-metadevices-online/ by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 23 Feb 2016 07:00:00 GMT -->
</html>
<!-- This website is like a Rocket, isn't it ? Performance optimized by WP Rocket. Learn more: http://wp-rocket.me - Debug: cached@1453988968 -->