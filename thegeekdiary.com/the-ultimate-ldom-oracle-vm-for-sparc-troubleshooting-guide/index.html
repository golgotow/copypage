<!DOCTYPE html><html lang="en-US">
<!-- Mirrored from thegeekdiary.com/the-ultimate-ldom-oracle-vm-for-sparc-troubleshooting-guide/ by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 23 Feb 2016 07:02:22 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head><!--[if IE]><![endif]--><link rel="dns-prefetch" href="http://fonts.googleapis.com/"/><link rel="dns-prefetch" href="http://pagead2.googlesyndication.com/"/><link rel="dns-prefetch" href="https://googleads.g.doubleclick.net/"/><link rel="stylesheet" href="../wp-content/cache/min/1/ab9dfccf3aeaecf3d14cd8e298c691c9.css" data-minify="1"/><script async src="http://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script src="https://apis.google.com/js/platform.js" async defer></script><script src="../wp-content/cache/min/1/203bccdeaed8b26e6c7a81dfdd6586ac.js" data-minify="1"></script><script src="../wp-content/cache/min/1/bd2496c4770e643443664a8d2d58dd49.js" data-minify="1"></script><script src="../wp-content/cache/min/1/6d40f649f9b6e55667652760e63f5b7f.js" data-minify="1"></script> <meta charset="UTF-8"/><title>The Ultimate LDom (Oracle VM for SPARC) troubleshooting guide</title><meta name="description" content="Most of the LDOM issues can be easily resolved by looking at the error message. Below are some basic troubleshooting tips to resolve common LDOM related issues.
1. Unable to create LDom
2. Unable to install LDom
3. Unable to configure LDom
4. Unable to bind LDom
5. Unable to connect to LDom"/><meta name="keywords" content="ldom, ovm for sparc, troubleshooting ldom issues, vntsd, ldmd, control domain guest domain"/><meta name="robots" content="noodp,noydir"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="alternate" type="application/rss+xml" title="The Geek Diary &raquo; Feed" href="../feed/index.html"/><link rel="alternate" type="application/rss+xml" title="The Geek Diary &raquo; Comments Feed" href="../comments/feed/index.html"/><link rel="alternate" type="application/rss+xml" title="The Geek Diary &raquo; The Ultimate LDOMs troubleshooting guide Comments Feed" href="feed/index.html"/><link rel="canonical" href="index.html"/> <script type="text/javascript">window._wpemojiSettings={"baseUrl":"http:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/thegeekdiary.com\/wp-includes\/js\/wp-emoji-release.min.js"}};!function(a,b,c){function d(a){var c,d=b.createElement("canvas"),e=d.getContext&&d.getContext("2d");return e&&e.fillText?(e.textBaseline="top",e.font="600 32px Arial","flag"===a?(e.fillText(String.fromCharCode(55356,56806,55356,56826),0,0),d.toDataURL().length>3e3):"diversity"===a?(e.fillText(String.fromCharCode(55356,57221),0,0),c=e.getImageData(16,16,1,1).data.toString(),e.fillText(String.fromCharCode(55356,57221,55356,57343),0,0),c!==e.getImageData(16,16,1,1).data.toString()):("simple"===a?e.fillText(String.fromCharCode(55357,56835),0,0):e.fillText(String.fromCharCode(55356,57135),0,0),0!==e.getImageData(16,16,1,1).data[0])):!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g;c.supports={simple:d("simple"),flag:d("flag"),unicode8:d("unicode8"),diversity:d("diversity")},c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.simple&&c.supports.flag&&c.supports.unicode8&&c.supports.diversity||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);</script> <style type="text/css">img.wp-smiley,img.emoji{display:inline!important;border:none!important;box-shadow:none!important;height:1em!important;width:1em!important;margin:0 .07em!important;vertical-align:-0.1em!important;background:none!important;padding:0!important}</style><link rel='https://api.w.org/' href='../wp-json/index.html'/><link rel="EditURI" type="application/rsd+xml" title="RSD" href="../xmlrpc0db0.php?rsd"/><link rel="alternate" type="application/json+oembed" href="../wp-json/oembed/1.0/embed711a.json?url=http%3A%2F%2Fthegeekdiary.com%2Fthe-ultimate-ldom-oracle-vm-for-sparc-troubleshooting-guide%2F"/><link rel="alternate" type="text/xml+oembed" href="../wp-json/oembed/1.0/embed9431?url=http%3A%2F%2Fthegeekdiary.com%2Fthe-ultimate-ldom-oracle-vm-for-sparc-troubleshooting-guide%2F&amp;format=xml"/><link rel="Shortcut Icon" href="../wp-content/themes/minimum-pro/images/favicon.ico" type="image/x-icon"/><link rel="author" href="https://plus.google.com/u/0/103178102930927944245/"/> <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]--> <script type="text/javascript">var fb_timeout=null;var fb_opts={'overlayShow':true,'hideOnOverlayClick':true,'showCloseButton':true,'centerOnScroll':true,'enableEscapeButton':true,'autoScale':true};var easy_fancybox_handler=function(){var fb_IMG_select='a[href*=".jpg"]:not(.nofancybox,.pin-it-button), area[href*=".jpg"]:not(.nofancybox), a[href*=".jpeg"]:not(.nofancybox,.pin-it-button), area[href*=".jpeg"]:not(.nofancybox), a[href*=".png"]:not(.nofancybox,.pin-it-button), area[href*=".png"]:not(.nofancybox)';jQuery(fb_IMG_select).addClass('fancybox image');var fb_IMG_sections=jQuery('div.gallery');fb_IMG_sections.each(function(){jQuery(this).find(fb_IMG_select).attr('rel','gallery-'+fb_IMG_sections.index(this));});jQuery('a.fancybox, area.fancybox, li.fancybox a:not(li.nofancybox a)').fancybox(jQuery.extend({},fb_opts,{'transitionIn':'elastic','easingIn':'easeOutBack','transitionOut':'elastic','easingOut':'easeInBack','opacity':false,'hideOnContentClick':false,'titleShow':false,'titlePosition':'over','titleFromAlt':true,'showNavArrows':true,'enableKeyboardNav':true,'cyclic':false}));jQuery('a[href*=".pdf"]:not(.nofancybox), area[href*=".pdf"]:not(.nofancybox)').addClass('fancybox-pdf');jQuery('a.fancybox-pdf, area.fancybox-pdf, li.fancybox-pdf a:not(li.nofancybox a)').fancybox(jQuery.extend({},fb_opts,{'type':'html','width':'90%','height':'90%','padding':10,'titleShow':false,'titlePosition':'float','titleFromAlt':true,'autoDimensions':false,'scrolling':'no','onStart':function(selectedArray,selectedIndex,selectedOpts){selectedOpts.content='<embed src="'+selectedArray[selectedIndex].href+'#toolbar=1&navpanes=0&nameddest=self&page=1&view=FitH,0&zoom=80,0,0" type="application/pdf" height="100%" width="100%" />'}}));jQuery('a[href*="youtube.com/watch"]:not(.nofancybox), area[href*="youtube.com/watch"]:not(.nofancybox)').addClass('fancybox-youtube');jQuery('a[href*="youtu.be/"]:not(.nofancybox), area[href*="youtu.be/"]:not(.nofancybox)').addClass('fancybox-youtube');jQuery('a.fancybox-youtube, area.fancybox-youtube, li.fancybox-youtube a:not(li.nofancybox a)').fancybox(jQuery.extend({},fb_opts,{'type':'iframe','width':640,'height':360,'titleShow':false,'titlePosition':'float','titleFromAlt':true,'onStart':function(selectedArray,selectedIndex,selectedOpts){selectedOpts.href=selectedArray[selectedIndex].href.replace(new RegExp('youtu.be','i'),'www.youtube.com/embed').replace(new RegExp('watch\\?(.*)v=([a-z0-9\_\-]+)(&amp;|&|\\?)?(.*)','i'),'embed/$2?$1$4');var splitOn=selectedOpts.href.indexOf('?');var urlParms=(splitOn>-1)?selectedOpts.href.substring(splitOn):"";selectedOpts.allowfullscreen=(urlParms.indexOf('fs=0')>-1)?false:true}}));jQuery('#fancybox-auto').trigger('click');}</script> <script data-no-minify="1">(function(w,d){function a(){var b=d.createElement("script");b.async=!0;b.src="../wp-content/plugins/wp-rocket/inc/front/js/lazyload.1.0.2.min.js";var a=d.getElementsByTagName("script")[0];a.parentNode.insertBefore(b,a)}w.attachEvent?w.attachEvent("onload",a):w.addEventListener("load",a,!1)})(window,document);</script></head><body class="single single-post postid-2703 single-format-standard custom-header content-sidebar" itemscope="itemscope" itemtype="http://schema.org/WebPage"><div class="site-container"><header class="site-header" role="banner" itemscope="itemscope" itemtype="http://schema.org/WPHeader"><div class="wrap"><div class="title-area"><p class="site-title" itemprop="headline"><a href="../index.html" title="The Geek Diary">The <span class="custom-title">{Geek} </span>Diary</a></p><h2 class="site-description" itemprop="description">HowTos | Concepts | Guides</h2></div><aside class="widget-area header-widget-area"><section id="text-31" class="widget widget_text"><div class="widget-wrap"><div class="textwidget"><div style="text-align: center"><style>.responsive-after-post{width:728px;height:90px}@media(max-width: 800px){.responsive-after-post{display:none !Important}}</style> <ins class="adsbygoogle responsive-after-post"
style="display:inline-block"
data-ad-client="ca-pub-9806101468749934"
data-ad-slot="9599170000"></ins> <script>(adsbygoogle=window.adsbygoogle||[]).push({});</script> </div></div></div></section></aside></div></header><nav class="nav-primary" role="navigation" itemscope="itemscope" itemtype="http://schema.org/SiteNavigationElement"><div class="wrap"><ul id="menu-primary-navigation" class="menu genesis-nav-menu menu-primary"><li id="menu-item-2717" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor menu-item-has-children menu-item-2717"><a href="../category/solaris/index.html">Solaris</a><ul class="sub-menu"><li id="menu-item-2837" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-2837"><a href="../category/solaris/svm/index.html">SVM</a></li><li id="menu-item-2839" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-2839"><a href="../category/solaris/zfs/index.html">ZFS</a></li><li id="menu-item-2836" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-2836"><a href="../category/solaris/hardware/index.html">Hardware</a></li><li id="menu-item-2838" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-2838"><a href="../category/solaris/vxvm/index.html">VxVM</a></li></ul></li><li id="menu-item-2833" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-2833"><a href="../category/solaris/solaris-11/index.html">Solaris 11</a></li><li id="menu-item-2835" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-2835"><a href="../category/solaris/zones/index.html">Zones</a></li><li id="menu-item-2834" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-2834"><a href="../category/solaris/ldoms/index.html">LDOMs</a></li><li id="menu-item-2718" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-2718"><a href="../category/vcs/index.html">VCS</a></li><li id="menu-item-2719" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-2719"><a href="../category/linux/index.html">Linux</a></li><li id="menu-item-2840" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-2840"><a href="../category/interview-questions/index.html">Interview Questions</a></li><li id="menu-item-2931" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-2931"><a href="../category/oracle/index.html">oracle</a></li></ul></div></nav><div class="site-inner"><div class="wrap"><div class="content-sidebar-wrap"><main class="content" role="main" itemprop="mainContentOfPage" itemscope="itemscope" itemtype="http://schema.org/Blog"><article class="post-2703 post type-post status-publish format-standard category-ldoms tag-ldom tag-ldom-troubleshooting entry" itemscope="itemscope" itemtype="http://schema.org/BlogPosting" itemprop="blogPost"><header class="entry-header"><h1 class="entry-title" itemprop="headline">The Ultimate LDOMs troubleshooting guide</h1><p class="entry-meta">By <span class="entry-author" itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><a href="../author/sandeep_patil/index.html" class="entry-author-link" itemprop="url" rel="author"><span class="entry-author-name" itemprop="name">Sandeep</span></a></span> <span class="entry-comments-link"><a href="index.html#comments"><span class="dsq-postid" data-dsqidentifier="2703 http://thegeekdiary.com/?p=2703">2 Comments</span></a></span></p></header><div class="entry-content" itemprop="text"><p>Most of the LDOM issues can be easily resolved by looking at the error message. Below are some of the most commonly faced LDOM issues and basic troubleshooting tips to resolve them.</p><div class="codeme"><pre>1. Unable to create LDom
2. Unable to install LDom
3. Unable to configure LDom
4. Unable to bind LDom
5. Unable to connect to LDom</pre></div><h4>How to verify if LDom services are started</h4><p>Below are two basic services needs to be running on the Primary domain (aka Control domain) for the ldom to start/work properly.</p><div><table border=0 style="width: 100%; margin-bottom: 20px;"><tr><td style="border-top:none; text-align: center; padding: 1rem 0px 0px;"><style>.square-responsive{width:300px;height:250px}@media(max-width: 400px){.square-responsive{width:250px;height:250px}}</style> <ins class="adsbygoogle square-responsive"
style="display:inline-block"
data-ad-client="ca-pub-9806101468749934"
data-ad-slot="7337034404"></ins> <script>(adsbygoogle=window.adsbygoogle||[]).push({});</script></td></tr></table></div><div class="codeme"><pre>1. svc:/ldoms/ldmd:default
2. svc:/ldoms/vntsd:default</pre></div><p>Here, ldmd is ldom service and vntsd is the virtual console service. The state of the service should be online, rather than disabled/maintenance. If the State of the service is disabled we can try restarting it using svcadm command. If the state of the service is in maintenance check the below logs for any abnormalities :</p><p><strong>/var/svc/log/ldoms-ldmd:default.log</strong> for the ldm logs<br /> <strong>/var/svc/log/ldoms-vntsd:default.log</strong> for the vntsd logs</p><p>Also check /var/adm/messages file for any error logs related to LDOMs. Use the ps command to check the process list whether the ldmd  and vntsd  is there in the process list or not.</p><div class="codeme"><pre># ps -ef | egrep "vntsd|ldmd"</pre></div><p>Below is the default configuration of the ldmd service and the vntsd service :</p><div class="codeme"><pre>svc:> select ldoms/ldmd
svc:/ldoms/ldmd> listprop
ldmd                                    application
ldmd/debug                              integer  0
ldmd/hops                               integer  0
ldmd/nocfg                              boolean  false
ldmd/xmpp                               boolean  false
fmd_config                              application
fmd_config/fmd_to_ldmd_init_timeout     integer  20
fmd_config/fmd_to_ldmd_running_timeout  integer  10
filesystem                              dependency
filesystem/entities                     fmri     svc:/system/filesystem/local
filesystem/grouping                     astring  require_all
filesystem/restart_on                   astring  none
filesystem/type                         astring  service
general                                 framework
general/action_authorization            astring  solaris.smf.manage.ldoms
general/entity_stability                astring  Unstable
general/single_instance                 boolean  true
start                                   method
start/exec                              astring  /opt/SUNWldm/bin/ldmd_start
start/timeout_seconds                   count    120
start/type                              astring  method
stop                                    method
stop/exec                               astring  :kill
stop/timeout_seconds                    count    60
stop/type                               astring  method
tm_common_name                          template
tm_common_name/C                        ustring  "Logical Domain Manager"</pre></div><div class="codeme"><pre>svc:> select ldoms/vntsd
svc:/ldoms/vntsd> listprop
vntsd                     application
vntsd/listen_addr         astring  localhost
vntsd/timeout_minutes     integer  0
vntsd/vcc_device          astring  virtual-console-concentrator@0
network                   dependency
network/entities          fmri     svc:/milestone/network
network/grouping          astring  optional_all
network/restart_on        astring  error
network/type              astring  service
syslog                    dependency
syslog/entities           fmri     svc:/system/system-log
syslog/grouping           astring  optional_all
syslog/restart_on         astring  none
syslog/type               astring  service
general                   framework
general/entity_stability  astring  Unstable
start                     method
start/exec                astring  /lib/svc/method/svc-vntsd
start/timeout_seco</pre></div><p>If unable to telnet to a guest ldom from control domain, one may need to stop/restart vntsd service:</p><div class="codeme"><pre># svcadm disable /ldoms/vntsd
# svcadm enable  /ldoms/vntsd</pre></div><div class="content-box-green"><a href="../ovm-for-sparc-ldoms-troubleshooting-console-issues/index.html" title="OVM for SPARC (LDOMs) : Troubleshooting console issues" target="_blank">OVM for SPARC (LDOMs) : Troubleshooting console issues</a></div><h4>LDOM console logs</h4><p>Starting from LDom 3.0, console log is collected at /var/log/vntsd/*/*   ( minimum Solaris 11 on primary domain ).</p><div class="codeme"><pre># ldm list
NAME             STATE      FLAGS   CONS    VCPU  MEMORY   UTIL  NORM  UPTIME
primary          active     -n-cv-  UART    8     24G      0.2%  0.2%  12d 11h 1m
ldom01          active     -n----  4001    10    2304M    0.1%  0.1%  12d 7h 22m

// console logs on live system:
# ls -l /var/log/vntsd/*/*
-rw-------   1 root     root     2812386 Sep 18 10:38 /var/log/vntsd/ldom01/console-log</pre></div><h4>Ensure proper binding of resources</h4><p>In order for resources to be assigned to the LDOM domains, they need to be bound to the appropriate domain. This process binds the virtual resources to actual physical resources available on the system. If there is not enough physical resource to be allocated, failure will be reported during the binding process.</p><p>One or more of the following errors are observed when one have issue binding resources:<br /> <strong>1. Insufficient VCPUS resources to bind LDom.<br /> 2. Not enough free memory present to meet this request.<br /> 3. Could not bind requested memory for LDom.<br /> 4. Only [number] physical crypto unit resource(s) available to bind to LDom.<br /> 5. Didn&#8217;t find a suitable vcc service in a bound service domain to bind guest [guestname] console.</strong></p><p>Below is a newly created LDom guest named guest01, with resources added, but not being bound yet. Notice that the LDC fields are blank, and there are no actual allocation of VCPUs and memory. The STATE of the guest is noted as inactive.</p><div class="codeme"><pre># ldm list-bindings -e guest01
NAME             STATE      FLAGS   CONS    VCPU  MEMORY   UTIL  UPTIME
guest01          <strong>inactive</strong>   ------          4     3G

UUID
    1105fe75-b5c6-6447-929c-a8dba81db847

MAC
    00:14:4f:fa:2e:70

CONTROL
    failure-policy=ignore
    extended-mapin-space=off
    cpu-arch=native
    rc-add-policy=
    shutdown-group=15

DEPENDENCY
    master=

CONSTRAINT
    threading=max-throughput

VARIABLES
    auto-boot?=false
    boot-device=/virtual-devices@100/channel-devices@200/disk@0:a disk net
    pm_boot_policy=disabled=1;ttfc=0;ttmr=0;

NETWORK
    NAME             SERVICE                     ID   DEVICE     MAC               MODE   PVID VID                  MTU   MAXBW      LINKPROP
    vnet0            primary-vsw0                0               00:14:4f:fb:c2:d0        1                                          phys-state
    vnet1            sec1-vsw0                   1               00:14:4f:fa:95:92        1                                          phys-state

DISK
    NAME             VOLUME                      TOUT ID   DEVICE  SERVER         MPGROUP
    guest01-root     guest01-root@primary-vds0         0
    guest01-data1    guest01-data1@primary-vds0        1

VLDCC
    NAME             SERVICE                     DESC              <strong>LDC</strong>
    ds               primary-vldc0@primary       domain-services</pre></div><p>Once the guest is bound, the actual physical resources are bound, and LDCs(Logical Domain Channels) are assigned. The domain STATE will be shown as &#8216;bound&#8217;.</p><p><strong>Memory binding failures</strong><br /> Memory binding failure is reported when there is no additional unallocated memory available for allocation. ldm bind will report the following error:</p><div class="codeme"><pre># ldm bind guest01
<strong>Not enough free memory present to meet this request Could not bind requested memory for LDom guest01</strong></pre></div><p>Corrective actions :<br /> 1. Review how much unallocated memory is available on the system using the ldm list-devices memory subcommand. Then assign the actual free available memory to the domain.</p><div class="codeme"><pre># ldm list-devices memory
MEMORY
PA SIZE
0x188000000 <strong>1920M</strong>
# ldm set-memory 1920M guest01
# ldm bind guest01</pre></div><p>2. Alternatively, reduce the amount of memory from another domain by using the ldm set-memory or remove-memory subcommand on the another domain. Then proceed to bind the domain.</p><div class="codeme"><pre># ldm remove-memory 1g primary
# ldm bind guest01</pre></div><p><strong>VCPU binding failure</strong><br /> VCPU binding failure is reported when there is no additional unallocated VCPU available for allocation. ldm bind will report the following error:</p><div class="codeme"><pre># ldm bind guest01
<strong>Insufficient VCPU resources to bind LDom guest01</strong></pre></div><p>The corrective actions are to:<br /> 1. Review how many unallocated VCPUs are available on the system using the ldm list-devices vcpu subcommand. Then assigned the actual free available VCPUs to the domain.</p><div class="codeme"><pre># ldm list-devices vcpu
VCPU
PID %FREE
28 100
29 100
30 100
31 100
# ldm set-vcpu 4 guest01
# ldm bind guest01</pre></div><p>2. Alternatively, reduce the amount of VCPUs from another domain by using the ldm(1M) set-vcpu or remove-vcpu subcommand on the another domain. Then proceed to bind the domain.</p><div class="codeme"><pre># ldm remove-vcpu 2 primary
# ldm bind guest01</pre></div><p><strong>MAU(Cryptographic Unit) binding failure</strong><br /> *NOTE*  MAU units are on T1, T2 and T3 series systems only. T4 systems do not have MAU&#8217;s. On T4 systems, each core contains a stream processing unit (SPU) that provides cryptographic processing.</p><p>MAU binding failure is reported when there is no additional unallocated MAU available for allocation. Additionally requirement is that at least one of the VCPUs from the processor core where the MAU originated has to be assigned to the domain. Despite the MAU binding failure, the bind will proceed with the rest of resources. ldm bind will report the following error:</p><div class="codeme"><pre># ldm bind guest01
<strong>Only 1 physical crypto unit resource(s) available to bind to LDom guest01, proceeding with binding 1 additional crypto unit(s)</strong></pre></div><p>The corrective actions are to:<br /> 1. Review how many unallocated MAUs are available on the system using the ldm list-devices mau subcommand. Then make sure at least one VCPUs from the associated core is assigned domain before assigning the available MAUs to the domain.</p><div class="codeme"><pre># ldm list-devices mau
MAU
ID CPUSET
2 (8, 9, 10, 11)
3 (12, 13, 14, 15)
4 (16, 17, 18, 19)
5 (20, 21, 22, 23)
6 (24, 25, 26, 27)
7 (28, 29, 30, 31)
# ldm add-vcpu 1 guest01
# ldm add-mau 1 guest01
# ldm bind guest01</pre></div><p>2. Alternatively, reduce the amount of MAUs from another domain by using the ldm set-mau or remove-mau subcommand on the another domain. Here, again one must take care to ensure one VCPU from the core where the MAU is originating from is assigned to the domain. Then proceed to bind the domain.</p><div class="codeme"><pre># ldm remove-mau 1 primary</pre></div><p>One may also need to remove 1 VCPU and assign to the guest to make sure one of the VCPUs from the same core as the MAU is assigned to the guest.</p><div class="codeme"><pre># ldm remove-vcpu 1 primary
# ldm add-vcpu 1 primary
# ldm bind guest01</pre></div><p><strong>Virtual Console binding failure</strong><br /> Virtual console concentrator(VCC) and virtual console(VCONS) provide console access to the guest domain. It need to be bound a virtual console service created on the primary domain. Miscovered VCC can resulted in error during binding:</p><div class="codeme"><pre># ldm bind guest01
<strong>The virtual console concentrator service primary-vcc1 not exist or is not bound. Didn't find a suitable vcc service in a bound service domain to bind guest guest01 console</strong></pre></div><p>To ensure the VCC configurations are configured according, use the ldm list -l <domain> comand to review the configurations:</p><div class="codeme"><pre># ldm list -l guest01
NAME             STATE      FLAGS   CONS    VCPU  MEMORY   UTIL  UPTIME
guest01          bound      ------  <strong>5001</strong>    4     3G
--lines omitted--

VCONS
    NAME             SERVICE                     PORT   LOGGING
    guest01          primary-vcc0@primary        5001   on


# ldm list -l primary
NAME             STATE      FLAGS   CONS    VCPU  MEMORY   UTIL  UPTIME
primary          active     -n-cv-  SP      4     4128M    0.9%  14d 55m

--lines omitted--
VCC
    NAME             PORT-RANGE
    primary-vcc0     <strong>5000-5100</strong>
--lines omitted--

VCONS
    NAME             SERVICE                     PORT   LOGGING
                     SP</pre></div><p>If not configured, please follow the following steps to configure the console service:</p><div class="codeme"><pre># ldm add-vconscon port-range=5000-5100 primary-vcc0 primary
# ldm set-vconsole port=5000 service=primary-vcc0@primary guest01</pre></div><p>Then make sure that the LDom console SMF service is update and running:</p><div class="codeme"><pre># svcs vntsd
STATE STIME FMRI
offline 13:20:40 svc:/ldoms/vntsd:default
# svcadm enable vntsd
# svcs vntsd
STATE STIME FMRI
online 13:39:35 svc:/ldoms/vntsd:default</pre></div><h4>Data collection for troubleshooting</h4><p>It is important to provide the proper troubleshooting data to oracle support in order to get a speedy resolution. Below are few log files which can be really helpful in troubleshooting the LDOM issues.</p><p><strong>SMF(Service Management Facility) logs for the LDom related services on the primary domain</strong></p><div class="codeme"><pre>/var/svc/log/ldoms-ldmd:default.log
/var/svc/log/ldoms-vntsd:default.log
/var/svc/log/ldoms-agents:default.log
/var/opt/SUNWldm/ldom-db.xml</pre></div><p><strong>SMF(Service Management Facility) and logs for the LDom related services on the Guest LDom</strong></p><div class="codeme"><pre>/var/svc/log/platform-sun4v-drd:default.log
/var/svc/log/ldoms-agents:default.log</pre></div><p>If the ldmd daemon dumps core, the core file will be &#8216;/var/opt/SUNWldm/core&#8217; unless you have used coreadm to control the core file location. The message <strong>&#8216;Invalid response&#8217; from ldm</strong> usually means that the ldmd daemon has dumped core so the core file should be collected in that case.</p><p><strong>explorer</strong><br /> Explorer collects a number of important LDom related outputs on primary(control) domain :</p><div class="codeme"><pre># /opt/SUNWexplo/bin/explorer -w default,ldom</pre></div></p><div class="geek-social"><h5>SHARE ON</h5> <a class="geek-link geek-twitter" href="https://twitter.com/intent/tweet?text=The%20Ultimate%20LDOMs%20troubleshooting%20guide&amp;url=http://thegeekdiary.com/the-ultimate-ldom-oracle-vm-for-sparc-troubleshooting-guide/&amp;via=patilsandeep911" target="_blank">Twitter</a><a class="geek-link geek-facebook" href="https://www.facebook.com/sharer/sharer.php?u=http://thegeekdiary.com/the-ultimate-ldom-oracle-vm-for-sparc-troubleshooting-guide/" target="_blank">Facebook</a><a class="geek-link geek-googleplus" href="https://plus.google.com/share?url=http://thegeekdiary.com/the-ultimate-ldom-oracle-vm-for-sparc-troubleshooting-guide/" target="_blank">Google+</a></div></div><footer class="entry-footer"><p class="entry-meta"><span class="entry-categories">Filed Under: <a href="../category/solaris/ldoms/index.html" rel="category tag">LDOMs</a></span> <span class="entry-tags">Tagged With: <a href="../tag/ldom/index.html" rel="tag">ldom</a>, <a href="../tag/ldom-troubleshooting/index.html" rel="tag">ldom troubleshooting</a></span></p><div class="related-posts"><h3 class="related-title">Related Posts</h3><ol class="related-list"><li><a href="../solaris-11-increasing-the-size-of-a-vdisk-in-ldom-with-backend-device-as-zfs-volume/index.html" rel="bookmark" title="Permanent Link toSolaris 11 : Increasing the size of a vdisk in LDom ( with backend device as ZFS volume )">Solaris 11 : Increasing the size of a vdisk in LDom ( with backend device as ZFS volume )</a></li><li><a href="../ldom-live-migration-basics-explained/index.html" rel="bookmark" title="Permanent Link toLDOM live migration basics explained">LDOM live migration basics explained</a></li><li><a href="../ovm-for-sparc-ldoms-troubleshooting-console-issues/index.html" rel="bookmark" title="Permanent Link toOVM for SPARC (LDOMs) : Troubleshooting console issues">OVM for SPARC (LDOMs) : Troubleshooting console issues</a></li><li><a href="../how-to-save-ldom-configuration-and-restore-from-xml-file/index.html" rel="bookmark" title="Permanent Link toHow to save LDOM configuration and restore from xml file">How to save LDOM configuration and restore from xml file</a></li><li><a href="../how-to-create-an-io-domain/index.html" rel="bookmark" title="Permanent Link toHow to create an I/O domain">How to create an I/O domain</a></li></ol></div></footer></article><div id="disqus_thread"><div id="dsq-content"><ul id="dsq-comments"><li class="comment even thread-even depth-1" id="dsq-comment-9634"><div id="dsq-comment-header-9634" class="dsq-comment-header"><cite id="dsq-cite-9634"> <span id="dsq-author-user-9634">Sagar Bhamare</span></cite></div><div id="dsq-comment-body-9634" class="dsq-comment-body"><div id="dsq-comment-message-9634" class="dsq-comment-message"><p>Nice one bro !!! thnx for posting it here</p></div></div><ul class="children"><li class="comment odd alt depth-2" id="dsq-comment-9767"><div id="dsq-comment-header-9767" class="dsq-comment-header"><cite id="dsq-cite-9767"> http://thegeekdiary.com <span id="dsq-author-user-9767">Sandeep Patil</span></cite></div><div id="dsq-comment-body-9767" class="dsq-comment-body"><div id="dsq-comment-message-9767" class="dsq-comment-message"><p>I&#8217;m glad you liked it bro !</p></div></div></li></ul></li></ul></div></div> <script type="text/javascript">var disqus_url='index.html';var disqus_identifier='2703%20http_/thegeekdiary.com/index6ab8.html?p=2703';var disqus_container_id='disqus_thread';var disqus_shortname='thegeekdiary';var disqus_title="The Ultimate LDOMs troubleshooting guide";var disqus_config_custom=window.disqus_config;var disqus_config=function(){this.language='';this.callbacks.onReady.push(function(){var script=document.createElement('script');script.async=true;script.src='indexd156.html?cf_action=sync_comments&amp;post_id=2703';var firstScript=document.getElementsByTagName('script')[0];firstScript.parentNode.insertBefore(script,firstScript);});if(disqus_config_custom){disqus_config_custom.call(this);}};(function(){var dsq=document.createElement('script');dsq.type='text/javascript';dsq.async=true;dsq.src='//'+disqus_shortname+'.disqus.com/embed.js';(document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(dsq);})();</script> </main><aside class="sidebar sidebar-primary widget-area" role="complementary" itemscope="itemscope" itemtype="http://schema.org/WPSideBar"><section id="search-2" class="widget widget_search"><div class="widget-wrap"><form method="get" class="search-form" action="http://thegeekdiary.com/" role="search"><input type="search" name="s" placeholder="Search the blog ..." /><input type="submit" value="Search" /></form></div></section><section id="text-54" class="widget widget_text"><div class="widget-wrap"><div class="textwidget"><div id="fb-root"></div> <script>(function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(d.getElementById(id))return;js=d.createElement(s);js.id=id;js.src="http://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.5&appId=122185768114530";fjs.parentNode.insertBefore(js,fjs);}(document,'script','facebook-jssdk'));</script> <div class="fb-page" data-href="https://www.facebook.com/thegeekdiary" data-height="320" data-small-header="false" data-adapt-container-width="true" data-hide-cover="false" data-show-facepile="false"><div class="fb-xfbml-parse-ignore"><blockquote cite="https://www.facebook.com/thegeekdiary"><a href="https://www.facebook.com/thegeekdiary">Thegeekdiary</a></blockquote></div></div></div></div></section><section id="text-53" class="widget widget_text"><div class="widget-wrap"><div class="textwidget"><div style="padding: 20px 0; overflow: hidden;" id="optin"><div class="g-person" data-width="273" data-href="//plus.google.com/u/0/103178102930927944245" data-theme="dark" data-layout="landscape" data-rel="author"></div><p style="padding: 0 15px; margin-bottom: 7px">India based Unix Admin, Cloud Evangelist and a Virtualization lover. Read more about me <a style="color: #d35400;" class="pagelink" href="../about/index.html">here ...</a></p><style>.twitter-btn{font:normal normal normal 13px/26px 'Helvetica Neue',Arial,sans-serif;height:28px;border-radius:4px;max-width:100%;box-sizing:border-box;position:relative;background-color:#F8F8F8;background-image:-webkit-gradient(linear,left top,left bottom,from(#FFF),to(#DEDEDE));background-image:-moz-linear-gradient(top,#FFF,#DEDEDE);background-image:-o-linear-gradient(top,#FFF,#DEDEDE);background-image:-ms-linear-gradient(top,#FFF,#DEDEDE);background-image:linear-gradient(top,#FFF,#DEDEDE);border:#CCC solid 1px;color:#333;font-weight:bold;text-shadow:0 1px 0 rgba(255,255,255,.5);-webkit-user-select:none;-moz-user-select:none;-o-user-select:none;user-select:none;cursor:pointer;overflow:hidden;display:inline-block;vertical-align:top;zoom:1;text-decoration:none}.twitter-btn:hover{text-decoration:none}.twitter-btn
i{width:21px;height:16px;left:4px;margin-top:-6px;position:absolute;top:50%;background:rgba(0, 0, 0, 0) url(data:image/png;base64,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) 0 0 no-repeat;background-position:-24px 0}.twitter-btn
.label{padding:0
7px 0 29px;white-space:nowrap}</style><a target="_blank" class="twitter-btn" title="Follow @patilsandeep911 on Twitter" href="https://twitter.com/intent/user?screen_name=patilsandeep911"> <i></i> <span class="label">@patilsandeep911</span> </a></div></div></div></section><section id="text-41" class="widget widget_text"><div class="widget-wrap"><div class="textwidget"><div id="optin"><form action="http://thegeekdiary.us3.list-manage.com/subscribe/post?u=dfd9717ae3a215b40e3cb1ffb&amp;id=24b8b4f404" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank"><h5>GET YOUR FREE E-BOOK</h5><p>Download the FREE ebook - The Complete Oracle Hardware reference</p><input type="email" size="30" value="Enter your email" name="EMAIL" class="required email" id="mce-EMAIL" onfocus="if(this.value==this.defaultValue)this.value='';" onblur="if(this.value=='')this.value=this.defaultValue;"><div id="mce-responses" class="clear"><div class="response" id="mce-error-response" style="display:none"></div><div class="response" id="mce-success-response" style="display:none"></div></div><div class="clear"> <input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button"></div></form></div></div></div></section><section id="text-23" class="widget widget_text"><div class="widget-wrap"><div class="textwidget"><style>.sidebar-responsive{width:300px;height:600px}@media(max-width: 1024px){.sidebar-responsive{width:300px;height:250px}}</style> <ins class="adsbygoogle sidebar-responsive"
style="display:inline-block"
data-ad-client="ca-pub-9806101468749934"
data-ad-slot="1672277200"></ins> <script>(adsbygoogle=window.adsbygoogle||[]).push({});</script></div></div></section></aside></div></div></div><footer class="site-footer" role="contentinfo" itemscope="itemscope" itemtype="http://schema.org/WPFooter"><div class="wrap"><nav class="nav-footer"><ul id="menu-top-menu" class="menu genesis-nav-menu menu-footer"><li id="menu-item-316" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-316"><a href="../archives/index.html">Archives</a></li><li id="menu-item-317" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-317"><a href="../contact-us/index.html">Contact Us</a></li><li id="menu-item-2584" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2584"><a href="../copyright-terms-and-privacy-policy/index.html">Copyright</a></li></ul></nav></div></footer></div> <script type="text/javascript">var disqus_shortname='thegeekdiary';(function(){var nodes=document.getElementsByTagName('span');for(var i=0,url;i<nodes.length;i++){if(nodes[i].className.indexOf('dsq-postid')!=-1){nodes[i].parentNode.setAttribute('data-disqus-identifier',nodes[i].getAttribute('data-dsqidentifier'));url=nodes[i].parentNode.href.split('#',1);if(url.length==1){url=url[0];}
else{url=url[1];}
nodes[i].parentNode.href=url+'#disqus_thread';}}
var s=document.createElement('script');s.async=true;s.type='text/javascript';s.src='//'+disqus_shortname+'.disqus.com/count.js';(document.getElementsByTagName('HEAD')[0]||document.getElementsByTagName('BODY')[0]).appendChild(s);}());</script> <script type="text/javascript">jQuery(document).ready(function(){var q2w3_sidebar_1_options={"sidebar":"sidebar","margin_top":20,"margin_bottom":80,"screen_max_width":768,"width_inherit":false,"widgets":['text-23']};q2w3_sidebar(q2w3_sidebar_1_options);setInterval(function(){q2w3_sidebar(q2w3_sidebar_1_options);},1500);});</script> <script type="text/javascript">jQuery(document).on('ready post-load',easy_fancybox_handler);</script> <script src="../wp-content/cache/min/1/ea696d6d2b5f14b168c9151cbbe8c939.js" data-minify="1"></script></body>
<!-- Mirrored from thegeekdiary.com/the-ultimate-ldom-oracle-vm-for-sparc-troubleshooting-guide/ by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 23 Feb 2016 07:02:24 GMT -->
</html>
<!-- This website is like a Rocket, isn't it ? Performance optimized by WP Rocket. Learn more: http://wp-rocket.me - Debug: cached@1453995113 -->